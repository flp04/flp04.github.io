<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evolução de Treinos</title>
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous"> -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
    <section id="main">
      <h3>Abdominais</h3>
      <div v-for="abd in dados.abdominais">
        <p>{{ abd.data }}: <strong>{{abd.serie}}</strong></p>
      </div>
      <h3>Agachamentos</h3>
      <div v-for="agc in dados.agachamentos">
        <p>{{ agc.data }}: <strong>{{agc.serie}}</p>
      </div>
        <!-- <div>
            <p>05-05-2023 <strong>Abdominais:</strong> 20 (teste)</p>
            <p>05-05-2023 <strong>Agachamentos:</strong> 10 (teste)</p>
        </div>
        <div>
            <p>06-05-2023 <strong>Abdominais:</strong> 29</p>
            <p>06-05-2023 <strong>Agachamentos:</strong> 30</p>
        </div>
        <div>
            <p>08-05-2023 <strong>Abdominais:</strong> 40</p>
            <p>08-05-2023 <strong>Agachamentos:</strong> 34</p>
        </div>
        <div>
            <p>09-05-2023 <strong>Abdominais:</strong> 44</p>
        </div>
        <div>
            <p>10-05-2023 <strong>Abdominais:</strong> 49</p>
            <p>10-05-2023 <strong>Agachamentos:</strong> 37</p>
        </div>
        <div>
            <p>11-05-2023 <strong>Abdominais:</strong> 49</p>
        </div>
        <div>
            <p>15-05-2023 <strong>Abdominais:</strong> 53</p>
            <p>15-05-2023 <strong>Agachamentos:</strong> 39</p>
        </div>
        <div>
            <p>16-05-2023 <strong>Abdominais: </strong> 49</p>
        </div>
        <div>
            <p>17-05-2023 <strong>Abdominais: </strong> 57</p>
            <p>17-05-2023 <strong>Agachamentos:</strong> 40</p>
        </div>
        <div>
            <p>17-05-2023 <strong>Abdominais: </strong> 59</p>
        </div>
        <button @click="inserirDia()">Inserir dia</button> -->

<!-- Button trigger modal -->
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
      Inserir Atividade
    </button>
  
  <!-- Modal -->
  <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Inserir atividade</h5>
          <div>
              <select class="form-control" v-model="change.atividade">
                <option value="abdominais">Abdominais</option>
                <option value="agachamentos">Agachamentos</option>
              </select>
          </div>
          <div>
              <label for="">Série</label>
              <input type="number" v-model="change.serie">
              <span>+</span>
          </div>
        </div>
        <!-- <div class="modal-body">
          ...
        </div> -->
        <div class="card-body">
          <h5 class="card-title">Reports <span>/Today</span></h5>

          <!-- Line Chart -->
          <div id="reportsChart"></div>

          <script>
            document.addEventListener("DOMContentLoaded", () => {
              new ApexCharts(document.querySelector("#reportsChart"), {
                series: [{
                  name: 'Sales',
                  data: [31, 40, 28, 51, 42, 82, 56],
                }, {
                  name: 'Revenue',
                  data: [11, 32, 45, 32, 34, 52, 41]
                }, {
                  name: 'Customers',
                  data: [15, 11, 32, 18, 9, 24, 11]
                }],
                chart: {
                  height: 350,
                  type: 'area',
                  toolbar: {
                    show: false
                  },
                },
                markers: {
                  size: 4
                },
                colors: ['#4154f1', '#2eca6a', '#ff771d'],
                fill: {
                  type: "gradient",
                  gradient: {
                    shadeIntensity: 1,
                    opacityFrom: 0.3,
                    opacityTo: 0.4,
                    stops: [0, 90, 100]
                  }
                },
                dataLabels: {
                  enabled: false
                },
                stroke: {
                  curve: 'smooth',
                  width: 2
                },
                xaxis: {
                  type: 'datetime',
                  categories: ["2018-09-19T00:00:00.000Z", "2018-09-19T01:30:00.000Z", "2018-09-19T02:30:00.000Z", "2018-09-19T03:30:00.000Z", "2018-09-19T04:30:00.000Z", "2018-09-19T05:30:00.000Z", "2018-09-19T06:30:00.000Z"]
                },
                tooltip: {
                  x: {
                    format: 'dd/MM/yy HH:mm'
                  },
                }
              }).render();
            });
          </script>
          <!-- End Line Chart -->

        </div>
        
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" @click="saveChanges()">Save changes</button>
        </div>
      </div>
    </div>
  </div>

    </section>
    <script>
        var vm = new Vue({
            el: '#main',
            data() {
                return {
                  dados: {
                    abdominais: [],
                    agachamentos: []
                  },
                  change: {
                    atividade: '',
                    serie: ''
                  }
                }
            },
            mounted() {
              this.carregarDados()
            },
            methods: {
              carregarDados() {
                fetch('dados.json')
                .then(response => response.json())
                .then(data => {
                  // this.abdominais = data[0].abdominais;
                  // this.agachamentos = data[1].agachamentos;
                  this.dados = data
                  // console.log(data[0].abdominais)
                })
                .catch(error => {
                  console.error('Erro ao carregar o arquivo JSON:', error);
                });
              },
              saveChanges() {
                let hoje = new Date
                  // Obter dia, mês e ano
                  let dia = hoje.getDate();
                  let mes = hoje.getMonth() + 1; // Os meses são indexados a partir de zero, então adicionamos 1
                  let ano = hoje.getFullYear();
                  // Formatar o dia e o mês com dois dígitos
                  let diaFormatado = dia < 10 ? '0' + dia : dia;
                  let mesFormatado = mes < 10 ? '0' + mes : mes;
                  // Criar a string formatada
                  let hojeFormatado = diaFormatado + '-' + mesFormatado + '-' + ano;
                  let dado = {data: hojeFormatado, serie: this.change.serie}

                if (this.change.atividade.toLowerCase() == 'abdominais') {
                  this.dados.abdominais.push(dado)
                  this.enviarDados(this.dados)
                } else if (this.change.atividade.toLowerCase() == 'agachamentos') {
                  this.dados.agachamentos.push(dado)
                  this.enviarDados(this.dados)
                } else {
                  alert('atividade invalida')
                }
              },
              enviarDados(dados) {
                fetch('index.php', {
                  method: 'POST',
                  body: JSON.stringify(this.dados),
                  headers: {
                    'Content-Type': 'application/json'
                  }
                })
                  .then(response => response.json())
                  .then(data => {
                    console.log('Resposta do servidor:', data);
                  })
                  .catch(error => {
                    console.error('Erro ao enviar para o servidor:', error);
                  });
              }
            },
        })
    </script>
    
    <script src="js.js"></script>
    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script> -->


      <!-- Importando o jQuery -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  
  <!-- Importando o js do bootstrap -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

  <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.3.0/chart.min.js"></script>
    <!-- <script src="assets/vendor/chart.js/chart.umd.js"></script> -->
    <!-- https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.3.0/chart.min.js -->

</body>
</html>